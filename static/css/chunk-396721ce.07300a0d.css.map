{"version":3,"sources":["webpack:///src/components/src/components/PriceList.vue"],"names":[],"mappings":"AAmIA,oCACA,WAAA,CACA,kBACA,CACA,kCACA,YAAA,CACA,UACA","file":"chunk-396721ce.07300a0d.css","sourcesContent":["<template>\r\n  <section class=\"services-prices\">\r\n    <img src=\"/static/img/home/7/bg.png\" alt=\"\" class=\"bg\">\r\n    <div class=\"container\">\r\n      <h2 class=\"section__title\">Цены на парикхмахерские услуги</h2>\r\n      <div class=\"block\">\r\n        <div v-if=\"this.$vssWidth > 1170 && !categoriesLoading\" class=\"tabs\">\r\n          <div\r\n              :class=\"[\r\n                  'tab',\r\n                  {'active': category.id === currentCategoryId}\r\n              ]\"\r\n              v-for=\"category in categories\"\r\n              :key=\"category.id\"\r\n              @click=\"currentCategoryId = category.id\"\r\n          >\r\n            <span>{{ category.name }}</span>\r\n          </div>\r\n        </div>\r\n        <VueSlickCarousel\r\n            v-if=\"this.$vssWidth <= 1170 && !categoriesLoading\"\r\n            class=\"tabs\"\r\n            :arrows=\"false\"\r\n            :dots=\"false\"\r\n            :draggable=\"true\"\r\n            :swipe=\"true\"\r\n            :variableWidth=\"true\"\r\n            :adaptiveHeight=\"true\"\r\n        >\r\n          <div\r\n              :class=\"[\r\n                  'tab',\r\n                  {'active': category.id === currentCategoryId}\r\n              ]\"\r\n              v-for=\"category in categories\"\r\n              :key=\"category.id\"\r\n              @click=\"currentCategoryId = category.id\"\r\n          >\r\n            <span>{{ category.name }}</span>\r\n          </div>\r\n        </VueSlickCarousel>\r\n        <Loader class=\"categories-loader\" v-if=\"categoriesLoading\"></Loader>\r\n\r\n        <div class=\"tab-item flex-start\" v-if=\"!categoriesLoading && !servicesLoading\">\r\n          <div class=\"img\">\r\n            <img :src=\"getSrc(currentCategory.thumb)\" alt=\"\">\r\n            <div class=\"description\">{{currentCategory.description}}</div>\r\n          </div>\r\n\r\n          <div class=\"price-list-wrapper\">\r\n            <div class=\"price-list\">\r\n              <PriceCheckbox\r\n                  v-for=\"service in services\"\r\n                  :key=\"service.id\"\r\n                  :id=\"service.id\"\r\n                  :label=\"service.name\"\r\n                  :price=\"service.price\"\r\n                  v-model=\"service.isChecked\"\r\n              ></PriceCheckbox>\r\n            </div>\r\n            <div class=\"price-list__total-price flex-between align-center\">\r\n              <div class=\"title\">Итоговая стоимость</div>\r\n              <div class=\"price\">{{ totalPrice }} руб.</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <Loader class=\"services-loader\" v-if=\"servicesLoading || categoriesLoading\"></Loader>\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport PriceCheckbox from \"@/components/PriceCheckbox\";\r\nimport VueSlickCarousel from 'vue-slick-carousel'\r\nimport Loader from \"@/components/Loader\";\r\nimport api from \"@/api\"\r\nimport {createImageUrl} from \"@/utils\";\r\n\r\nexport default {\r\n  name: \"PriceList\",\r\n  components: {PriceCheckbox, VueSlickCarousel, Loader},\r\n  props: ['category'],\r\n  created() {\r\n    this.getCategories()\r\n  },\r\n  methods: {\r\n    getSrc(src) {\r\n      return createImageUrl(src)\r\n    },\r\n    async getCategories() {\r\n      this.categoriesLoading = true\r\n      this.categories = await api.getServiceCategories(this.category)\r\n      this.currentCategoryId = this.categories[0].id\r\n      this.categoriesLoading = false\r\n    },\r\n    async getServices() {\r\n      this.servicesLoading = true\r\n      this.services = await api.getServicesForCategory(this.currentCategoryId)\r\n      this.servicesLoading = false\r\n    }\r\n  },\r\n  data: () => ({\r\n    categoriesLoading: false,\r\n    servicesLoading: false,\r\n    currentCategoryId: null,\r\n    categories: [],\r\n    services: [],\r\n  }),\r\n  watch: {\r\n    currentCategoryId() {\r\n      if (this.currentCategoryId !== null) {\r\n        this.services.length = 0\r\n        this.getServices()\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    currentCategory() {\r\n      return this.categories.find(c => c.id === this.currentCategoryId)\r\n    },\r\n    totalPrice() {\r\n      return this.services.reduce((acc, p) => {\r\n        return p.isChecked ? acc + p.price : acc\r\n      }, 0)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.categories-loader {\r\n  height: 68px;\r\n  margin-bottom: 64px;\r\n}\r\n.services-loader {\r\n  height: 552px;\r\n  width: 100%;\r\n}\r\n</style>"]}